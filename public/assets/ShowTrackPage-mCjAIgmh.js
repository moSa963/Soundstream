import{p as S,j as e,R as n,u as v,c as T,G as k,F as D,S as x,T as f,b as d,D as E,d as w,H as B,B as l,A as L,L as R,J as I}from"./index-kUZq1El7.js";import{B as P}from"./Banner-zlsjXFWP.js";import{S as $,C as b}from"./ConfirmationCard-rU_HIcxt.js";const A=S(e.jsx("path",{d:"M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82"}),"PlayArrowRounded"),O=({track:t,setTracks:r,onChange:a,open:c,setOpen:i})=>{const[s,o]=n.useState(),[g,u]=n.useState(!1),y=v(),{setError:p,setInfo:j}=T();n.useEffect(()=>{o({title:t.title,explicit:t.explicit})},[t]);const m=()=>{_(t.id,s,a,p,j),i(!1)};return e.jsxs(k,{open:c,setOpen:i,children:[e.jsx(D,{fullWidth:!0,placeholder:"Title...",value:(s==null?void 0:s.title)||"",onChange:h=>o({...s,title:h.target.value}),label:"Title"}),e.jsxs(x,{direction:"row",alignItems:"center",sx:{width:"100%"},children:[e.jsx(f,{children:"Explicit"}),e.jsx($,{checked:!!(s!=null&&s.explicit),onChange:(h,C)=>o({...s,explicit:C})})]}),e.jsxs(x,{direction:"row",spacing:2,children:[e.jsx(d,{onClick:m,children:"Save"}),e.jsx(d,{color:"error",onClick:h=>i(!1),children:"Cancel"})]}),e.jsx(E,{flexItem:!0}),e.jsx(d,{color:"error",fullWidth:!0,onClick:()=>u(!0),children:"Delete"}),e.jsx(b,{onClose:()=>u(!1),onConfirmed:()=>F(t==null?void 0:t.id,r,y,p,j),open:g,message:"Are you sure you want to delete this track?"})]})},_=async(t,r,a,c,i)=>{try{const o=await(await w(`api/tracks/${t}`,"POST",r)).json();a&&a(o.data),i("The track has been updated successfully.")}catch(s){c(s)}},F=async(t,r,a,c,i)=>{try{await w(`api/tracks/${t}`,"DELETE"),r(s=>s.filter(o=>o.id!=t)),a("/"),i("The track has been deleted successfully.")}catch(s){c(s)}},W=()=>{const{data:t}=B("track_root"),[r,a]=n.useState(!1);return e.jsxs(l,{sx:{width:"100%"},children:[e.jsx(P,{avatar:`${L}api/tracks/${t.id}/photo/${t.image}`,title:t.title,onEdit:()=>a(!0),description:`@${t.user.username}`,type:"track"}),e.jsx(O,{track:t,onChange:()=>{},setTracks:()=>{},open:r,setOpen:a}),e.jsx(R,{to:"lyrics",children:e.jsx(d,{children:"add lyrics"})}),e.jsx(l,{sx:{width:"100%",p:2},children:e.jsxs(x,{direction:"row",children:[e.jsx(I,{size:"large",color:"success",sx:{width:75,height:75,border:"1px solid"},title:"play",children:e.jsx(A,{sx:{width:75,height:75}})}),e.jsx(l,{sx:{flexGrow:1}}),e.jsx(l,{children:e.jsxs(f,{children:["created at: ",new Date(t.created_at).toLocaleDateString()]})})]})})]})};export{W as default};
